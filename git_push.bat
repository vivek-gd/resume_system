@echo off
chcp 65001 > nul 2>&1
setlocal enabledelayedexpansion
title Git ä¸€é”®ä¸Šä¼ æ›´æ–°è„šæœ¬

:: æ£€æŸ¥æ˜¯å¦åœ¨Gité¡¹ç›®ç›®å½•
if not exist .git (
    echo [31mâŒ é”™è¯¯ï¼šå½“å‰ç›®å½•ä¸æ˜¯Gité¡¹ç›®æ ¹ç›®å½•ï¼ˆæœªæ‰¾åˆ°.gitæ–‡ä»¶å¤¹ï¼‰[0m
    pause
    exit /b 1
)

echo ==============================================
echo ğŸ” æ­£åœ¨æ‹‰å–è¿œç¨‹ä»“åº“æœ€æ–°ä»£ç ï¼ˆgit pullï¼‰...
echo ==============================================
git pull
if %errorlevel% neq 0 (
    echo [31mâŒ git pull å¤±è´¥ï¼è¯·æ£€æŸ¥ç½‘ç»œ/åˆ†æ”¯å†²çªåé‡è¯•[0m
    pause
    exit /b 1
)
echo [32mâœ… æ‹‰å–è¿œç¨‹ä»£ç å®Œæˆ[0m
echo.

:: è®©ç”¨æˆ·è¾“å…¥æäº¤å¤‡æ³¨
set "commit_msg="
set /p commit_msg=ğŸ“ è¯·è¾“å…¥æœ¬æ¬¡æäº¤çš„å¤‡æ³¨ï¼ˆä¸èƒ½ä¸ºç©ºï¼‰ï¼š
if not defined commit_msg (
    echo [31mâŒ é”™è¯¯ï¼šæäº¤å¤‡æ³¨ä¸èƒ½ä¸ºç©ºï¼[0m
    pause
    exit /b 1
)

echo.
echo ==============================================
echo ğŸ“¤ æ­£åœ¨æ·»åŠ æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆgit add .ï¼‰...
echo ==============================================
git add .
echo [32mâœ… æ–‡ä»¶æ·»åŠ å®Œæˆ[0m
echo.

echo ==============================================
echo ğŸ“ æ­£åœ¨æäº¤æœ¬åœ°ä¿®æ”¹ï¼ˆgit commitï¼‰...
echo ==============================================
git commit -m "!commit_msg!"
if %errorlevel% neq 0 (
    echo [31mâŒ git commit å¤±è´¥ï¼æ— ä¿®æ”¹æ–‡ä»¶/å¤‡æ³¨æ ¼å¼é”™è¯¯[0m
    pause
    exit /b 1
)
echo [32mâœ… æœ¬åœ°æäº¤å®Œæˆ[0m
echo.

echo ==============================================
echo ğŸš€ æ­£åœ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆgit pushï¼‰...
echo ==============================================
git push
if %errorlevel% neq 0 (
    echo [31mâŒ git push å¤±è´¥ï¼è¯·æ£€æŸ¥è¿œç¨‹åˆ†æ”¯æƒé™/ç½‘ç»œ[0m
    pause
    exit /b 1
)

echo.
echo ==============================================
echo [32mğŸ‰ å…¨éƒ¨æ“ä½œå®Œæˆï¼æœ¬åœ°ä¿®æ”¹å·²æˆåŠŸæ¨é€åˆ°Gitè¿œç¨‹ä»“åº“[0m
echo ==============================================
endlocal
chcp 936 > nul 2>&1
pause
exit /b 0